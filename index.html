<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Informasi Akademik</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="sidebar">
  <h3>PORTAL AKADEMIK</h3>
  
  <button class="menu-btn active" onclick="showPage('dashboard', this)"><i class="fas fa-tachometer-alt me-2"></i> Dashboard</button>
  <button class="menu-btn" onclick="showPage('mahasiswa', this)"><i class="fas fa-user-graduate me-2"></i> Data Mahasiswa</button>
  <button class="menu-btn" onclick="showPage('dosen', this)"><i class="fas fa-chalkboard-teacher me-2"></i> Data Dosen</button>
  <button class="menu-btn" onclick="showPage('matkul', this)"><i class="fas fa-book me-2"></i> Data Mata Kuliah</button>
  <button class="menu-btn" onclick="showPage('input', this)"><i class="fas fa-pen-square me-2"></i> Input Nilai</button>
  <button class="menu-btn" onclick="showPage('view', this)"><i class="fas fa-table me-2"></i> Daftar Nilai</button>
</div>

<div class="top-navbar">
    <div class="brand-text">Sistem Informasi Akademik</div>
    
    <div class="dropdown">
        <div class="user-profile d-flex align-items-center gap-2" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <div class="text-end d-none d-md-block text-white">
                <div class="fw-bold" id="namaUser">Memuat...</div>
                <div style="font-size: 11px; opacity: 0.8;">Administrator</div>
            </div>
            <div class="profile-avatar">
                <i class="fas fa-user"></i>
            </div>
            <i class="fas fa-chevron-down text-white ms-1" style="font-size: 12px;"></i>
        </div>

        <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 mt-2" style="border-radius: 12px; overflow: hidden;">
            <li><h6 class="dropdown-header">Akun Saya</h6></li>
            <li>
                <a class="dropdown-item" href="javascript:void(0)" onclick="showPage('profil')">
                    <i class="fas fa-user-cog me-2 text-secondary"></i>Profil Saya
                </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
                <a class="dropdown-item text-danger fw-bold" href="#" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                </a>
            </li>
        </ul>
    </div>
</div>

<div class="content" style="margin-top: 0; padding-top: 20px;">
    
    <div id="page-dashboard" class="content-section active">
        <h2 class="page-title"><i class="fas fa-home me-2"></i> Dashboard</h2>
        
        <div class="dashboard-cards mb-4">
            <div class="card-stat bg-blue"><div class="card-body"><div class="card-info"><h3 id="countMhs">0</h3><p>Data Mahasiswa</p></div><div class="card-icon"><i class="fas fa-graduation-cap"></i></div></div></div>
            <div class="card-stat bg-orange"><div class="card-body"><div class="card-info"><h3 id="countDosen">0</h3><p>Data Dosen</p></div><div class="card-icon"><i class="fas fa-user-tie"></i></div></div></div>
            <div class="card-stat bg-red"><div class="card-body"><div class="card-info"><h3 id="countMatkul">0</h3><p>Data Mata Kuliah</p></div><div class="card-icon"><i class="fas fa-list-alt"></i></div></div></div>
            <div class="card-stat bg-green"><div class="card-body"><div class="card-info"><h3 id="countNilai">0</h3><p>Total Data Nilai</p></div><div class="card-icon"><i class="fas fa-clipboard-list"></i></div></div></div>
        </div>

        <div class="row">
            <div class="col-md-8 mb-3"><div class="card-custom h-100"><h5 class="mb-3"><i class="fas fa-chart-bar me-2"></i>Statistik Data Akademik</h5><canvas id="barChart"></canvas></div></div>
            <div class="col-md-4 mb-3"><div class="card-custom h-100"><h5 class="mb-3"><i class="fas fa-chart-pie me-2"></i>Proporsi Data</h5><canvas id="pieChart"></canvas></div></div>
        </div>
    </div>

    <div id="page-profil" class="content-section">
        <h2 class="page-title">Profil Saya</h2>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card-custom text-center shadow-lg">
                    <div class="mx-auto mb-4" style="width: 100px; height: 100px; background: #e0f2fe; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #006aff; font-size: 40px; box-shadow: 0 5px 15px rgba(0,106,255,0.2);"><i class="fas fa-user"></i></div>
                    <h4 class="fw-bold mb-1" id="dispNama">Nama User</h4>
                    <p class="text-muted small mb-4" id="dispEmail">email@contoh.com</p>
                    <form id="formProfil" class="text-start">
                        <div class="mb-3"><label>Nama Lengkap</label><input type="text" id="profNama" class="form-control" required></div>
                        <div class="mb-3"><label>Email</label><input type="email" id="profEmail" class="form-control bg-light" readonly></div>
                        <div class="mb-4"><label>User ID</label><input type="text" id="profUid" class="form-control bg-light" readonly style="font-size: 12px; font-family: monospace;"></div>
                        <button type="submit" class="btn-save py-2"><i class="fas fa-save me-2"></i>Simpan Perubahan</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="page-mahasiswa" class="content-section">
        <h2 class="page-title">Kelola Data Mahasiswa</h2>
        <div class="card-custom mb-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h5><i class="fas fa-user-plus me-2"></i>Form Mahasiswa</h5>
                <button type="button" class="btn-cancel" onclick="resetForm('mahasiswa')"><i class="fas fa-times me-2"></i>Batal Edit</button>
            </div>
            <form id="formMhs" class="row g-4">
                <div class="col-md-4"><label>Nama Lengkap</label><input type="text" id="namaMhs" class="form-control" placeholder="Nama Mahasiswa" required></div>
                <div class="col-md-3"><label>NIM</label><input type="text" id="nimMhs" class="form-control" placeholder="NIM" required></div>
                <div class="col-md-3"><label>Jurusan</label><select id="jurusanMhs" class="form-select"><option>Teknik Informatika</option><option>Sistem Informasi</option><option>Manajemen</option></select></div>
                <div class="col-md-2 d-flex align-items-end"><button type="submit" id="btnMhs" class="btn btn-primary w-100 btn-save">Simpan</button></div>
            </form>
        </div>
        <div class="table-box"><table class="table table-hover"><thead><tr><th>No</th><th>Nama Mahasiswa</th><th>NIM</th><th>Jurusan</th><th class="text-center">Aksi</th></tr></thead><tbody id="tabelMhs"></tbody></table></div>
    </div>

    <div id="page-dosen" class="content-section">
        <h2 class="page-title">Kelola Data Dosen</h2>
        <div class="card-custom mb-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h5><i class="fas fa-chalkboard-teacher me-2"></i>Form Dosen</h5>
                <button type="button" class="btn-cancel" onclick="resetForm('dosen')"><i class="fas fa-times me-2"></i>Batal Edit</button>
            </div>
            <form id="formDosen" class="row g-4">
                <div class="col-md-5"><label>Nama Dosen</label><input type="text" id="namaDosen" class="form-control" placeholder="Nama Lengkap" required></div>
                <div class="col-md-5"><label>NIDN</label><input type="text" id="nidn" class="form-control" placeholder="NIDN" required></div>
                <div class="col-md-2 d-flex align-items-end"><button type="submit" id="btnDosen" class="btn btn-primary w-100 btn-save">Simpan</button></div>
            </form>
        </div>
        <div class="table-box"><table class="table table-hover"><thead><tr><th>No</th><th>Nama Dosen</th><th>NIDN</th><th class="text-center">Aksi</th></tr></thead><tbody id="tabelDosen"></tbody></table></div>
    </div>

    <div id="page-matkul" class="content-section">
        <h2 class="page-title">Kelola Mata Kuliah</h2>
        <div class="card-custom mb-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h5><i class="fas fa-book me-2"></i>Form Mata Kuliah</h5>
                <button type="button" class="btn-cancel" onclick="resetForm('matkul')"><i class="fas fa-times me-2"></i>Batal Edit</button>
            </div>
            <form id="formMatkul" class="row g-4">
                <div class="col-md-5"><label>Nama Mata Kuliah</label><input type="text" id="namaMk" class="form-control" placeholder="Contoh: Pemrograman Web" required></div>
                <div class="col-md-3"><label>Kode MK</label><input type="text" id="kodeMk" class="form-control" placeholder="Contoh: TIF-101" required></div>
                <div class="col-md-2"><label>SKS</label><input type="number" id="sks" class="form-control" placeholder="SKS" required></div>
                <div class="col-md-2 d-flex align-items-end"><button type="submit" id="btnMatkul" class="btn btn-primary w-100 btn-save">Simpan</button></div>
            </form>
        </div>
        <div class="table-box"><table class="table table-hover"><thead><tr><th>No</th><th>Kode</th><th>Mata Kuliah</th><th>SKS</th><th class="text-center">Aksi</th></tr></thead><tbody id="tabelMatkul"></tbody></table></div>
    </div>

    <div id="page-input" class="content-section">
        <h2 class="page-title">Form Input Nilai</h2>
        <div class="card-custom mx-auto shadow-lg" style="max-width: 600px;">
            <div class="text-center mb-4"><h4 class="mt-3 fw-bold text-dark">Input Nilai Baru</h4></div>
            <form id="formNilai">
                <div class="mb-3"><label>Pilih Mahasiswa</label><select id="pilihMhs" class="form-select mb-3"><option value="">-- Pilih Mahasiswa --</option></select></div>
                <div class="row g-3 mb-3"><div class="col-md-6"><label>Nama Lengkap</label><input type="text" id="inpNama" class="form-control bg-light" readonly></div><div class="col-md-6"><label>NIM</label><input type="text" id="inpNim" class="form-control bg-light" readonly></div></div>
                <div class="mb-3"><label>Mata Kuliah</label><select id="inpMatkul" class="form-select" required><option value="">Sedang memuat data...</option></select></div>
                <div class="mb-4"><label>Dosen Pengampu</label><select id="inpDosen" class="form-select" required><option value="">Sedang memuat data...</option></select></div>
                <div class="mb-4"><label>Nilai Akhir (0-100)</label><input type="number" id="inpNilai" class="form-control" placeholder="0" required min="0" max="100" oninput="validasiAngka(this)" style="font-weight: bold; color: #006aff;"></div>
                <button class="btn-save w-100 py-3" type="submit"><i class="fas fa-check-circle me-2"></i>Simpan Data Nilai</button>
            </form>
        </div>
    </div>

    <div id="page-edit-nilai" class="content-section">
        <h2 class="page-title">Edit Data Nilai</h2>
        <div class="card-custom mx-auto shadow-lg" style="max-width: 600px; border-top: 5px solid #ffc107;">
            <div class="mb-3"><h5>Perbarui Nilai Mahasiswa</h5></div>
            <form id="formEditNilai">
                <div class="mb-3"><label>Ganti Mahasiswa</label><select id="editPilihMhs" class="form-select mb-3"><option value="">-- Pilih Mahasiswa --</option></select></div>
                <div class="row g-3 mb-3"><div class="col-md-6"><label>Nama Mahasiswa</label><input type="text" id="editNama" class="form-control bg-light" readonly></div><div class="col-md-6"><label>NIM</label><input type="text" id="editNim" class="form-control bg-light" readonly></div></div>
                <div class="mb-3"><label>Mata Kuliah</label><select id="editMatkul" class="form-select" required><option value="">Sedang memuat data...</option></select></div>
                <div class="mb-4"><label>Dosen Pengampu</label><select id="editDosen" class="form-select" required><option value="">Sedang memuat data...</option></select></div>
                <div class="mb-4"><label>Nilai (0-100)</label><input type="number" id="editNilai" class="form-control mb-4" required min="0" max="100" oninput="validasiAngka(this)"></div>
                
                <div class="d-flex gap-2">
                    <button class="btn btn-warning w-100 fw-bold text-white" type="submit">Simpan Perubahan</button>
                    <button type="button" class="btn btn-light w-100 border fw-bold" onclick="showPage('view')">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <div id="page-view" class="content-section">
        <h2 class="page-title">Daftar Nilai Mahasiswa</h2>
        <div class="table-box"><table class="table table-hover align-middle"><thead><tr><th>No</th><th>Nama</th><th>NIM</th><th>Matkul</th><th>Dosen</th><th class="text-center">Nilai</th><th class="text-center">Status</th><th class="text-center">Aksi</th></tr></thead><tbody id="tabelNilai"></tbody></table></div>
    </div>

</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase-config.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>

</body>
</html>